{"version":3,"sources":["pages/auction/Association.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"],"names":["socket","io","connect","process","Association","API_URL","usersString","useSelector","state","auction","auction_data","localStorage","getItem","users","JSON","parse","_useState","useState","_useState2","_slicedToArray","checkedItemName","setCheckedItemName","_useState3","_useState4","setCheckedItemid","_useState5","_useState6","setActivebroker","_useState7","_useState8","setVisible","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","_response$data$","current_brokers","name","id","checkedList","userToggleListener","wrap","_context","prev","next","axios","get","concat","sent","data","list5","map","item","index","_objectSpread","checked","key","Promise","all","setList5","userId","link_id","on","abrupt","off","t0","console","log","stop","apply","arguments","useEffect","isMounted","_useState9","_useState10","_jsx","_Fragment","children","_jsxs","className","type","onChange","newList","post","b_id","then","catch","error","emit","handleCheck","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread2","target","i","length","source","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty"],"mappings":"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","file":"static/js/10.75dc5ad9.chunk.js","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport io from \"socket.io-client\";\r\n\r\nconst socket = io.connect(process.env.REACT_APP_SERVER_URL);\r\nconst Association = () => {\r\n  const API_URL = process.env.REACT_APP_SERVER_URL;\r\n  const { auction_data } = useSelector((state) => state.auction);\r\n  const usersString = localStorage.getItem(\"users\");\r\n  const users = JSON.parse(usersString);\r\n  const [checkedItemName, setCheckedItemName] = useState(\"\");\r\n  const [checkedItemid, setCheckedItemid] = useState(\"\");\r\n  const [activebroker, setActivebroker] = useState();\r\n  const [visible, setVisible] = useState(false);\r\n\r\n\r\n\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const response = await axios.get(`${API_URL}/getselectbroker`);\r\n      const { current_brokers, name, id } = response.data[0];\r\n      const checkedList =\r\n        current_brokers !== 0\r\n          ? list5.map((item, index) =>\r\n              item.id === current_brokers\r\n                ? { ...item, checked: true, key: index }\r\n                : item\r\n            )\r\n          : list5;\r\n  \r\n      await Promise.all([\r\n        setCheckedItemName(name),\r\n        setCheckedItemid(id),\r\n        setActivebroker(current_brokers),\r\n        setList5(checkedList),\r\n      ]);\r\n      const userToggleListener = (userId) => {\r\n        setVisible(userId === users.link_id);\r\n      };\r\n      socket.on(\"user_toggle\", userToggleListener);\r\n      // Cleanup function\r\n      return () => {\r\n        // socket.off(\"users\",current_brokers);\r\n        // Remove the userToggleListener when the component unmounts\r\n        socket.off(\"user_toggle\", userToggleListener);\r\n      };\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  \r\n\r\n  useEffect(() => {\r\n\r\n    let isMounted = true;\r\n\r\n    fetchData();\r\n\r\n    socket.on(\"checkname\", (data) => {\r\n      if (isMounted) {\r\n        setCheckedItemName(data);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      isMounted = false;\r\n      socket.off(\"users\");\r\n      socket.off(\"checkname\");\r\n\r\n    };\r\n  }, [socket]);\r\n\r\n\r\n\r\n\r\n\r\n \r\n\r\n\r\n  // console.log(filteredDatabrokers);\r\n  const [list5, setList5] = useState([\r\n    { id: 1, name: \"Himaloy Broker House\", checked: false },\r\n    { id: 2, name: \"Uttaron Broker House\", checked: false },\r\n    { id: 3, name: \"Mohanonda brokers Ltd.\", checked: false },\r\n    { id: 4, name: \"Green Valley House\", checked: false },\r\n    { id: 5, name: \"Indigo brokers Ltd.\", checked: false },\r\n  ]);\r\n\r\n  const handleCheck = (id, name) => {\r\n    const newList = list5.map((item) => ({\r\n      ...item,\r\n      checked: item.id === id,\r\n      key: item.id === id ? item.key : item.key,\r\n    }));\r\n\r\n    setList5(newList);\r\n    setCheckedItemName(name);\r\n    setCheckedItemid(id);\r\n\r\n    axios\r\n      .post(`${API_URL}/addselectedbroker`, { b_id: id })\r\n      .then((response) => {\r\n        // Handle response if needed\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n\r\n    socket.emit(\"user\", id);\r\n    socket.emit(\"brokerscheck\", name);\r\n    socket.emit(\"user_toggle\", id);\r\n  };\r\n  return (\r\n    <>\r\n   \r\n            <div className=\"container\">\r\n              <h2>BROKERS LIST</h2>\r\n              <p>\r\n                CURRENT BROKER :{\" \"}\r\n                <span className=\"c_brokers\">{checkedItemName}</span>{\" \"}\r\n              </p>\r\n              <table className=\"table table-striped\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>ID</th>\r\n                    <th>Name</th>\r\n                    <th>Action</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {list5.map((item) => (\r\n                    <tr key={item.id + 7}>\r\n                      <td>{item.id}</td>\r\n                      <td>{item.name}</td>\r\n                      <td>\r\n                        <label className=\"switch\">\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            id={item.id}\r\n                            checked={item.checked}\r\n                            onChange={() => handleCheck(item.id, item.name)}\r\n                          />\r\n                          <span className=\"slider round\" />\r\n                        </label>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n              <button>Close Auction</button>\r\n            </div>\r\n          \r\n      \r\n    </>\r\n  );\r\n};\r\n\r\nexport default Association;\r\n","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}"],"sourceRoot":""}