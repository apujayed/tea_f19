(this["webpackJsonpreact-dashboard"]=this["webpackJsonpreact-dashboard"]||[]).push([[7],{102:function(e,t,c){"use strict";t.a=c.p+"static/media/message.17f316c9.mp3"},103:function(e,t,c){"use strict";t.a=c.p+"static/media/starttune.99619dc2.mp3"},123:function(e,t,c){},124:function(e,t){},132:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(4),a=c(9),r=c.n(a),i=c(1),o=c.n(i),l=c(6),d=c(8),j=c(17),b=c(102),u=c(103),h=c(100),m=(c(27),c(129)),x=(c(123),c(2)),O=function(e){var t=Object(n.useState)(e.filteredData),c=Object(d.a)(t,2),s=(c[0],c[1],Object(n.useState)(!1)),a=Object(d.a)(s,2),r=(a[0],a[1],Object(n.useRef)(null)),i=function(t){27===(t.charCode||t.keyCode)&&e.onClose()};return Object(n.useEffect)((function(){return document.body.addEventListener("keydown",i),function(){document.body.removeEventListener("keydown",i)}}),[]),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(m.a,{nodeRef:r,in:e.show,unmountOnExit:!0,timeout:{enter:0,exit:300},children:Object(x.jsx)("div",{className:"modal",onClick:e.onClose,ref:r,children:Object(x.jsxs)("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()},children:[Object(x.jsx)("div",{className:"modal-header",children:Object(x.jsx)("h4",{className:"modal-title",children:e.title})}),Object(x.jsx)("div",{className:"modal-body",children:Object(x.jsxs)("table",{className:"modaltable table-bordered",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{scope:"col",children:"#"}),Object(x.jsx)("th",{scope:"col",children:"Lot"}),Object(x.jsx)("th",{scope:"col",children:"Factory"}),Object(x.jsx)("th",{scope:"col",children:"Price"}),Object(x.jsx)("th",{scope:"col",children:"Bidder"}),Object(x.jsx)("th",{scope:"col",children:"Status"}),Object(x.jsx)("th",{scope:"col",children:"Action"})]})}),Object(x.jsx)("tbody",{children:e.filteredData.map((function(t,c){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{scope:"row",children:Object(x.jsx)("h4",{children:c+1})}),Object(x.jsx)("td",{children:Object(x.jsx)("h4",{children:t.lot})}),Object(x.jsx)("td",{children:Object(x.jsx)("h4",{children:t.factory_name})}),Object(x.jsx)("td",{children:Object(x.jsx)("h4",{children:t.maximum_bid})}),Object(x.jsx)("td",{children:Object(x.jsx)("h4",{children:t.buyer_name})}),Object(x.jsx)("td",{children:Object(x.jsx)("span",{className:1===t.sold_status?"hname":(t.sold_status,"rname"),children:1===t.sold_status?"Sold":0===t.sold_status?"Unsold":"Pending"})}),Object(x.jsxs)("td",{children:[Object(x.jsx)("button",{type:"button",onClick:function(){return e.onV(t,1)},className:"btn btn-success px-3",children:Object(x.jsx)("i",{className:"fas fa-check","aria-hidden":"true"})}),Object(x.jsx)("button",{type:"button",onClick:function(){return e.onV(t,0)},className:"btn btn-danger px-3",children:Object(x.jsx)("i",{className:"fas fa-times","aria-hidden":"true"})}),Object(x.jsx)("button",{type:"button",onClick:function(){return e.reAuc(t)},className:"btn btn-info px-3",children:Object(x.jsx)("i",{className:"fas fa-spinner","aria-hidden":"true"})})]})]},t.id)}))})]})}),Object(x.jsx)("div",{className:"modal-footer",children:Object(x.jsx)("button",{onClick:e.onClose,className:"btn btn-danger",children:"Close"})})]})})})})},f=c(107),p=c.n(f),v=c(101),g=c(55),N=c(44),y=function(e){e.sl;var t=e.el,c=e.users,n=e.handleSoldstatus;e.formatTime,e.time,e.index;return Object(x.jsxs)("tr",{children:[Object(x.jsxs)("td",{className:"text-center",children:[t.lot,Object(x.jsx)("br",{}),t.invoice]}),Object(x.jsxs)("td",{className:"text-center",children:[t.factory_name,Object(x.jsx)("br",{}),"(",t.grade,") Rating: ",Object(x.jsxs)("span",{style:{color:"purple"},children:["(",t.lirating_name,")"]}),Object(x.jsxs)("span",{style:{color:"navy"},children:["(",t.lrating_name,")"]})]}),Object(x.jsxs)("td",{className:"text-center",children:[t.price,Object(x.jsx)("br",{}),"(".concat(t.pkgs,")")]}),Object(x.jsxs)("td",{className:"text-center",children:[Object(x.jsxs)("div",{className:"bidd_name",children:[Object(x.jsx)("p",{className:"highest",children:t.maximum_bid}),Object(x.jsxs)("span",{className:t.buyer==c.link_id?"hname":"rname",children:[t.buyer_name,"(",t.maximum_bid-t.price,")"]})]}),Object(x.jsx)("br",{})]}),Object(x.jsx)("td",{className:"text-center",children:Object(x.jsx)("div",{className:"col-md-12 d-flex justify-content-center align-items-center col-sm-12 col-xs-12",children:Object(x.jsxs)("div",{className:"",children:[Object(x.jsx)("button",{onClick:function(){return n(t,1)},disabled:t.brokers!==c.link_id,className:1===t.sold_status?"btn-success square-circle mr-4":(t.sold_status," btn-warning square-circle mr-4"),children:Object(x.jsx)(N.b,{className:"bid"})}),Object(x.jsx)("button",{onClick:function(){return n(t,0)},disabled:t.brokers!==c.link_id,className:" btn-danger square-circle",children:Object(x.jsx)(N.c,{className:"bid"})})]})})})]})},k=(c(124),h.a.connect("http://68.183.81.28:3009")),w=function(){Object(s.n)();var e=Object(n.useState)(!1),t=Object(d.a)(e,2),c=t[0],a=t[1],i="http://68.183.81.28:3009",m=Object(j.c)((function(e){return e.auction})).auction_data,f=localStorage.getItem("users"),N=JSON.parse(f),w=Object(n.useState)(""),S=Object(d.a)(w,2),_=S[0],C=S[1],I=Object(n.useState)(""),E=Object(d.a)(I,2),R=(E[0],E[1]),T=Object(n.useState)(),A=Object(d.a)(T,2),F=(A[0],A[1]),L=Object(n.useState)([]),M=Object(d.a)(L,2),P=M[0],B=M[1],D=Object(n.useState)([]),V=Object(d.a)(D,2),G=V[0],z=V[1],U=Object(n.useState)(0),q=Object(d.a)(U,2),J=q[0],K=q[1],H=Object(n.useState)(1),Q=Object(d.a)(H,2),W=Q[0],X=Q[1],Y=Object(n.useState)(0),Z=Object(d.a)(Y,2),$=Z[0],ee=Z[1],te=Object(n.useState)(!1),ce=Object(d.a)(te,2),ne=(ce[0],ce[1]),se=Object(n.useState)(!0),ae=Object(d.a)(se,2),re=(ae[0],ae[1]),ie=Object(n.useState)(0),oe=Object(d.a)(ie,2),le=oe[0],de=oe[1],je=Object(n.useState)(!1),be=Object(d.a)(je,2),ue=be[0],he=be[1],me=Object(n.useState)(!1),xe=Object(d.a)(me,2),Oe=xe[0],fe=xe[1],pe=Object(n.useState)(!1),ve=Object(d.a)(pe,2),ge=ve[0],Ne=ve[1],ye=Object(j.b)(),ke=function(){var e=Object(l.a)(o.a.mark((function e(t){var c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,fe(!0),c=t.id,e.next=5,r.a.put("".concat(i,"/updatereauction"),{id:c});case 5:return e.next=7,r.a.get("".concat(i,"/getselectbroker"));case 7:n=e.sent,k.emit("user",n.data[0].current_brokers),fe(!1),k.on("users",(function(e){B(e),z(e)})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(l.a)(o.a.mark((function e(t,c){var n,s,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,fe(!0),n=t.id,s=c,e.next=6,r.a.put("".concat(i,"/updatesold"),{id:n,status:s});case 6:return e.next=8,r.a.get("".concat(i,"/getselectbroker"));case 8:a=e.sent,k.emit("user",a.data[0].current_brokers),fe(!1),k.on("users",(function(e){e.filter((function(e){return 0===e.sold_status}));B(e),z(e)})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,c){return e.apply(this,arguments)}}(),Se=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.a.get("".concat(i,"/getselectbroker"));case 3:t=e.sent,k.emit("user",t.data[0].current_brokers),a(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=Object(l.a)(o.a.mark((function e(){var t,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("visible"!==document.visibilityState){e.next=12;break}return e.prev=1,e.next=4,r.a.get("".concat(i,"/getselectbroker"));case 4:t=e.sent,c=t.data[0].auction,re(0===c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Ce=Object(n.useState)(!1),Ie=Object(d.a)(Ce,2),Ee=(Ie[0],Ie[1]),Re=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.a.post("".concat(i,"/startauc"));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.a.post("".concat(i,"/stopauc"));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(l.a)(o.a.mark((function e(){var t,c,n,s,a,l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.a.get("".concat(i,"/getselectbroker"));case 3:return t=e.sent,c=t.data[0],n=c.auction,s=c.current_brokers,a=c.name,l=c.id,re(0===n),e.next=8,Promise.all([C(a),R(l),F(s)]);case 8:return k.emit("user",s),d=function(e){ne(e===N.link_id)},k.on("user_toggle",d),e.abrupt("return",(function(){k.off("users",s),k.off("user_toggle",d)}));case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=!0,t=function(){he(!0)},c=function(){he(!1)},n=function(e){0===e&&new Audio(u.a).play();de(e)},s=Object(v.throttle)(_e,1e3);return k.on("visibility",s),k.on("start",t),k.on("stop",c),k.on("time",n),Ae(),k.on("users",(function(t){if(e){t.filter((function(e){return 0===e.sold_status}));B(t),z(t)}})),k.on("checkname",(function(t){e&&C(t)})),function(){e=!1,k.off("users"),k.off("checkname"),k.off("visibility",s),k.off("start",t),k.off("stop",c),k.off("time",n)}}),[k]),Object(n.useEffect)((function(){var e;return ue?function t(){k.emit("tick"),e=setTimeout(t,1e3)}():clearTimeout(e),function(){return clearTimeout(e)}}),[ue]),Object(n.useEffect)((function(){ye(Object(g.b)()),ze(),k.on("newMessage",(function(e){Ge(e)}));var e=function(e){re(e),localStorage.setItem("isVisible",e)},t=function(){he(!0)},c=function(){he(!1)},n=function(e){de(e)},s=function(e){ee(e)},a=function(e){K(e)},r=function(e){X(e)};return k.on("updateIndexes",(function(e){var t=e.startIndex,c=e.endIndex;console.log("Received updated indexes:",t,c),K(t),X(c)})),k.on("visibility",e),k.on("start",t),k.on("stop",c),k.on("time",n),k.on("activeUsers",s),k.on("startIndex",a),k.on("endIndex",r),k.emit("getObjects"),function(){!1,k.off("visibility",e),k.off("start",t),k.off("stop",c),k.off("time",n),k.off("activeUsers",s),k.off("startIndex",a),k.off("endIndex",r),k.off("getObjects"),k.off("updateIndexes"),k.off("newMessage")}}),[]);Math.floor(J/4),Object(v.throttle)(Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ne(!0),e.next=3,Re();case 3:re(!1),k.emit("visibility",!1),k.once("play-sound",(function(){new Audio(b.a).play()})),k.emit("start",P),Ne(!1);case 8:case"end":return e.stop()}}),e)}))),1e3);var Fe=function(){Le()},Le=Object(v.throttle)(Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te();case 2:re(!0),k.emit("visibility",!0),k.emit("stop");case 5:case"end":return e.stop()}}),e)}))),1e3),Me=function(e){var t=Math.floor(e/60).toString().padStart(2,"0"),c=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(c)},Pe=P.slice(J-4,W-4+3),Be=Object(n.useState)([]),De=Object(d.a)(Be,2),Ve=De[0],Ge=De[1],ze=function(){r.a.get("".concat(i,"/messages/latest")).then((function(e){Ge(e.data)})).catch((function(e){return console.log(e)}))};Object(n.useEffect)((function(){var e=h.a.connect("http://68.183.81.28:3009");e.on("startIn",(function(e){K(e)})),e.on("endIn",(function(e){X(e)}));var t=function(){document.hidden||e.emit("getEndIndex")};document.addEventListener("visibilitychange",t);var c=setInterval((function(){e.emit("getEndIndex")}),5e3);return function(){e.disconnect(),document.removeEventListener("visibilitychange",t),clearInterval(c)}}),[]);var Ue=Object(n.useState)(""),qe=Object(d.a)(Ue,2),Je=qe[0],Ke=qe[1];return Object(x.jsxs)(x.Fragment,{children:[Oe?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"overlay",children:Object(x.jsxs)("div",{className:"spinner-container",children:[Object(x.jsx)("div",{className:"spinner"}),Object(x.jsx)("span",{children:"Verifying data..."})]})})}):"",G[0]?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(O,{title:"Brokers Lot",onClose:function(){return a(!1)},show:c,filteredData:Pe,onV:we,reAuc:ke}),Object(x.jsxs)("div",{className:"section-head sec-h",children:[Object(x.jsxs)("p",{className:"br-n",children:["=",_,"="]}),Object(x.jsxs)("div",{className:"row newc",children:[Object(x.jsxs)("div",{className:"col-7 col-md-9 card-btn leftCard",children:[Object(x.jsxs)("h2",{children:["Auction Date:"," ",0===m.length?"":m[0].date," "]}),Object(x.jsxs)("p",{children:["SALE NO - #",0===m.length?"":m[0].sale_no," ",$," "]}),Object(x.jsxs)("p",{children:["Season - #",0===m.length?"":m[0].season," "]}),Object(x.jsxs)("p",{children:["CURRENT BROKER :"," ",Object(x.jsx)("span",{className:"c_brokers",children:_})," "]}),Object(x.jsx)("div",{className:" row margin-left",children:"BROKERS"===N.type?Object(x.jsx)("button",{type:"button",onClick:Se,className:"col-5  buttonGroup btn btn-primary  my-btn",children:"All"}):""})]}),Object(x.jsxs)("div",{className:"col-5 col-md-3 align-items-center justify-content-center mt-5 rCard",children:[Object(x.jsxs)("div",{className:"bflex card-btn rightButton",children:[Object(x.jsxs)("div",{className:"button-row",children:[Object(x.jsx)("button",{disabled:ge,type:"button",onClick:function(){k.emit("start",P)},className:"buttonGroup btn btn-primary my-btn",children:"START"}),Object(x.jsx)("button",{type:"button",onClick:Fe,className:"buttonGroup btn btn-danger my-btn",children:"STOP"})]}),Object(x.jsxs)("div",{className:"button-row",children:[Object(x.jsx)("button",{type:"button",onClick:function(){if(J-4>=0){console.log(J,W);var e=J-4,t=W-4;K(e),X(t),k.emit("updateIndexes",{startIndex:e,endIndex:t})}},className:"buttonGroup btn btn-success my-btn",children:"PREV"}),Object(x.jsx)("button",{type:"button",onClick:function(){if(W+4<=P.length){var e=J+4,t=W+4;K(e),X(t),k.emit("updateIndexes",{startIndex:e,endIndex:t}),k.off("updateIndexes"),Ee(!0)}else Fe()},className:"buttonGroup btn btn-success my-btn",children:"NEXT"})]})]}),Object(x.jsx)("div",{className:"col-12",children:Object(x.jsx)("div",{className:"card",children:Object(x.jsx)("div",{className:"row rightCard",children:Object(x.jsxs)("div",{className:" ",children:[Object(x.jsx)("div",{className:"col-md-6 count-t",children:Object(x.jsx)("h2",{className:"text-center mh2",children:Me(le)})}),Object(x.jsx)("div",{className:"col-md-6 name-t",children:Object(x.jsx)("h2",{className:"mh2 text-center",children:N.short_name})})]})})})})]})]})]}),Object(x.jsx)("div",{className:"card p-3",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsxs)("div",{className:"col-6 col-md-3 d-flex justify-content-start align-items-center",children:[Object(x.jsxs)("div",{className:"col",children:[Object(x.jsx)("label",{className:"visually-hidden",htmlFor:"inline-form-website",children:"Message"}),Object(x.jsx)("input",{className:"form-control",type:"text",value:Je,onChange:function(e){return Ke(e.target.value)},placeholder:"Message"}),"  "]}),Object(x.jsx)("div",{className:"col",children:Object(x.jsx)("button",{type:"submit",onClick:function(e){return function(e,t){e.preventDefault();var c=N.short_name;r.a.post("".concat(i,"/messages"),{message:t,short_name:c}).then((function(e){Ke(""),k.on("newMessage",(function(e){Ge(e)}))})).catch((function(e){return console.log(e)}))}(e,Je)},className:"btn btn-primary",children:"Send"})})]}),Object(x.jsxs)("div",{className:"col-6 col-md-9 d-flex justify-content-end",children:[Object(x.jsx)("span",{style:{backgroundColor:"red",color:"white",padding:"5px",fontSize:"12px"},children:"Last Message"}),Object(x.jsx)("span",{style:{backgroundColor:"white",color:"black",padding:"5px",fontSize:"12px"},children:Ve.message}),Object(x.jsx)("span",{style:{backgroundColor:"blue",color:"white",padding:"5px",fontSize:"12px"},children:Ve.u_id})]})]})}),Object(x.jsxs)("h2",{className:"text-center p-h",children:["-=",N.type," PANEL=- "]}),Object(x.jsx)("hr",{className:"hr-h"}),Object(x.jsxs)("div",{className:"con",children:[Object(x.jsx)("div",{className:"row g-1",children:Object(x.jsxs)("table",{id:"auction",className:"table table-bordered",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsxs)("th",{scope:"col",children:["Lot ",Object(x.jsx)("br",{}),"Invoice"]}),Object(x.jsxs)("th",{scope:"col",children:["Factory",Object(x.jsx)("br",{}),"Grade"]}),Object(x.jsxs)("th",{scope:"col",children:["Price",Object(x.jsx)("br",{}),"Qty"]}),Object(x.jsxs)("th",{scope:"col",children:["Highest",Object(x.jsx)("br",{})," Buyer"]}),Object(x.jsx)("th",{scope:"col",children:"Bid"})]})}),Object(x.jsx)("tbody",{children:P.slice(J,W+3).map((function(e,t){return Object(x.jsx)(y,{sl:J+t+1,el:e,users:N,handleSoldstatus:we,formatTime:Me,time:le},e.id+9)}))})]})}),Object(x.jsx)("div",{className:"",children:Object(x.jsx)("div",{className:"row",children:P.slice(J-4,W-4+3).map((function(e,t){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"col-6 col-md-3",children:Object(x.jsx)("div",{className:"card",children:Object(x.jsx)("div",{className:1===e.sold_status?"rem-card-y":"rem-card-x",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsxs)("div",{className:"col-8",children:[Object(x.jsx)("div",{className:"col-12",children:Object(x.jsxs)("p",{className:"rem-text",children:[e.factory_name," (",e.lot,")"]})}),Object(x.jsx)("div",{className:"col-12",children:Object(x.jsxs)("p",{className:"rem-text",children:[e.buyer_name,"(",e.maximum_bid-e.price,")"]})})]}),Object(x.jsx)("div",{className:"col-4 d-flex align-items-center justify-content-center",children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-6",children:Object(x.jsx)("i",{className:"bi bi-sun"})}),Object(x.jsx)("div",{className:"col-6",children:Object(x.jsx)("i",{className:"bi bi-moon"})})]})})]})})})},t)})}))})})]})]}):Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(x.jsx)(p.a,{type:"spin",color:"#007bff",height:50,width:50}),Object(x.jsx)("div",{style:{marginTop:"20px",fontSize:"16px",fontWeight:"bold"},children:"Verifying Data..."})]})})]})};t.default=function(){var e=Object(s.n)();return Object(n.useEffect)((function(){var t=sessionStorage.getItem("token");e(t?"/auction":"/")}),[]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("section",{className:"content-header"}),Object(x.jsx)("section",{className:"content",children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-xs-12",children:Object(x.jsx)(w,{})})})})]})}}}]);
//# sourceMappingURL=7.163f877e.chunk.js.map